{% extends "base.html" %}
{% block head %}
<script src="{{ url_for('static', filename='js/fuse.min.js') }}"></script>
<style>
   body{
        overflow: hidden !important;
   }
</style>
{% endblock %}
{% block content %}
<div class="flex h-[85vh] min-h-[500px] bg-gradient-to-br from-gray-900/90 to-gray-800/90 rounded-2xl shadow-2xl border border-gray-800/80 backdrop-blur-md overflow-hidden">
   <!-- Sidebar: Folder Tree -->
   <div id="sigma-folder-tree"
      class="w-80 min-w-[16rem] max-w-xs h-full overflow-y-auto sigma-scrollbar bg-gray-900/80 border-r border-gray-800 flex-shrink-0 sticky top-0 z-10">
      <div class="p-4">
         <input id="sigma-search"
            placeholder="🔍 Search rules..."
            class="w-full px-3 py-2 rounded-lg bg-gray-800 text-gray-200 focus:outline-none focus:ring-2 focus:ring-yellow-400 transition text-base shadow-inner mb-4" />
      </div>
      <div id="sigma-tree-list"></div>
   </div>
   <!-- Main: File List -->
   <div class="flex-1 h-full overflow-y-auto sigma-scrollbar p-8 relative">
      <div id="sigma-breadcrumbs" class="mb-4 text-sm text-gray-400"></div>
      <!-- Export Button -->
      <div class="flex justify-end mb-4">
         <button id="export-folder-btn"
            class="px-4 py-2 bg-yellow-400 text-gray-900 font-semibold rounded-lg shadow hover:bg-yellow-300 transition"
            style="display:none;">
         Export This Folder
         </button>
      </div>
      <div id="sigma-file-list" class="space-y-2">
         <!-- Files/subfolders will be rendered here -->
      </div>
   </div>
</div>
<script>
   window._sigmaTree = {{ sigma_tree|tojson }};
</script>
<script src="{{ url_for('static', filename='js/sigma.js') }}"></script>
{% endblock %}